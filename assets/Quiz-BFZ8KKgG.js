import{c as _,R as F,j as e,m as u,r as m,B as b}from"./index-5LhQW9Oc.js";import{L as B,C as $,S as Z}from"./PatternRelationshipsVisualizer-CuTO7rqn.js";import{C as Q,A as G}from"./LessonPage-1LvdMznC.js";import q from"./TallyMarks-8jyJrWF4.js";import{C as A}from"./clock-DbMFHXen.js";import{R as Y}from"./zap-D9vDyGyy.js";import"./target-DLxitd3A.js";import"./AppStateHooks-DED2R50d.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],se=_("circle-alert",ee);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],te=_("info",re),V=({type:s,message:N,title:h,showIcon:n=!0,className:i="",onDismiss:x,autoHide:f=!1,duration:o=3e3})=>{const[g,a]=F.useState(!0);F.useEffect(()=>{if(f){const d=setTimeout(()=>{a(!1),x&&setTimeout(x,300)},o);return()=>clearTimeout(d)}},[f,o,x]);const c={success:{icon:$,bgColor:"bg-success-50",borderColor:"border-success-200",textColor:"text-success-800",iconColor:"text-success-600"},error:{icon:Q,bgColor:"bg-error-50",borderColor:"border-error-200",textColor:"text-error-800",iconColor:"text-error-600"},warning:{icon:se,bgColor:"bg-warning-50",borderColor:"border-warning-200",textColor:"text-warning-800",iconColor:"text-warning-600"},info:{icon:te,bgColor:"bg-primary-50",borderColor:"border-primary-200",textColor:"text-primary-800",iconColor:"text-primary-600"},hint:{icon:B,bgColor:"bg-yellow-50",borderColor:"border-yellow-200",textColor:"text-yellow-800",iconColor:"text-yellow-600"}}[s],t=c.icon;return g?e.jsx(u.div,{className:`rounded-lg border p-4 ${c.bgColor} ${c.borderColor} ${i}`,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},children:e.jsxs("div",{className:"flex items-start",children:[n&&e.jsx("div",{className:"flex-shrink-0 mr-3",children:e.jsx(t,{className:`w-5 h-5 ${c.iconColor}`})}),e.jsxs("div",{className:"flex-1",children:[h&&e.jsx("h3",{className:`text-sm font-medium ${c.textColor} mb-1`,children:h}),e.jsx("p",{className:`text-sm ${c.textColor}`,children:N})]}),x&&e.jsx("button",{onClick:x,className:`ml-3 flex-shrink-0 ${c.textColor} hover:opacity-75`,children:e.jsx(Q,{className:"w-4 h-4"})})]})}):null},ae=({question:s,onAnswer:N,onNext:h,showHint:n=!1,disabled:i=!1,className:x="",isLastQuestion:f=!1})=>{const[o,g]=m.useState(null),[a,j]=m.useState(!1),[c,t]=m.useState(!1),[d,p]=m.useState(0),[y,w]=m.useState(!1),[C,S]=m.useState(0),[I,v]=m.useState(!1),[z,E]=m.useState(Date.now()),[L,P]=m.useState(!1);m.useEffect(()=>{const r=setInterval(()=>{const l=Math.floor((Date.now()-z)/1e3);S(l),l>=30&&v(!0)},1e3);return()=>clearInterval(r)},[z]),m.useEffect(()=>{E(Date.now()),S(0),v(!1),g(null),j(!1),t(!1),p(0),w(!1)},[s.id]);const k=r=>{if(i||a)return;g(r),p(R=>R+1);const l=H(r);t(l),j(!0),l&&w(!0),N(r,l),l&&C<30&&v(!1)},H=r=>Array.isArray(s.answer)?Array.isArray(r)&&r.length===s.answer.length&&r.every(l=>s.answer.includes(l)):r===s.answer,K=()=>{h&&h(),T()},D=()=>{P(!0),v(!0),h&&h(),T()},T=()=>{g(null),j(!1),t(!1),w(!1),E(Date.now()),S(0),v(!1),P(!1)},M=()=>e.jsx("div",{className:"space-y-3",children:s.type==="multiple-choice"&&s.options?.map((r,l)=>e.jsx(u.button,{onClick:()=>k(r),disabled:i||a,className:`w-full p-4 text-left rounded-lg border-2 transition-all duration-200 ${a?r===s.answer?"border-success-500 bg-success-50 text-success-800":o===r?"border-error-500 bg-error-50 text-error-800":"border-gray-200 bg-gray-50 text-gray-600":"border-gray-200 hover:border-primary-300 hover:bg-primary-50"} ${i?"cursor-not-allowed opacity-50":"cursor-pointer"}`,whileHover:i||a?{}:{scale:1.02},whileTap:i||a?{}:{scale:.98},children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:`w-6 h-6 rounded-full border-2 mr-3 flex items-center justify-center ${a?r===s.answer?"border-success-500 bg-success-500":o===r?"border-error-500 bg-error-500":"border-gray-300":"border-gray-300"}`,children:[a&&r===s.correctAnswer&&e.jsx($,{className:"w-4 h-4 text-white"}),a&&o===r&&r!==s.correctAnswer&&e.jsx(Q,{className:"w-4 h-4 text-white"})]}),s.id==="tally-1"&&r.includes("tally marks")?e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(q,{count:parseInt(r.split(" ")[0]),animated:!1,size:"md",color:"#3b82f6"}),e.jsxs("span",{className:"font-medium text-sm text-gray-600",children:["(",r,")"]})]}):e.jsx("span",{className:"font-medium",children:r})]})},l))}),W=()=>e.jsx("div",{className:"grid grid-cols-2 gap-4",children:["True","False"].map(r=>e.jsx(u.button,{onClick:()=>k(r==="True"),disabled:i||a,className:`p-6 text-center rounded-lg border-2 font-medium transition-all duration-200 ${a?r===(s.correctAnswer?"True":"False")?"border-success-500 bg-success-50 text-success-800":o===(r==="True")?"border-error-500 bg-error-50 text-error-800":"border-gray-200 bg-gray-50 text-gray-600":"border-gray-200 hover:border-primary-300 hover:bg-primary-50"} ${i?"cursor-not-allowed opacity-50":"cursor-pointer"}`,whileHover:i||a?{}:{scale:1.02},whileTap:i||a?{}:{scale:.98},children:r},r))}),X=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"text",value:o||"",onChange:r=>g(r.target.value),onKeyPress:r=>{r.key==="Enter"&&o&&k(o)},disabled:i||a,placeholder:"Type your answer here...",className:"w-full p-4 border-2 border-gray-200 rounded-lg focus:border-primary-500 focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed"}),e.jsx(b,{onClick:()=>o&&k(o),disabled:!o||i||a,className:"w-full",children:"Submit Answer"})]}),J=()=>{const r=(R,U)=>{k(U)};let l;return s.question?.toLowerCase().includes("square")?l="square":s.question?.toLowerCase().includes("rectangle")?l="rectangle":s.question?.toLowerCase().includes("triangle")?l="triangle":s.question?.toLowerCase().includes("pentagon")?l="pentagon":s.question?.toLowerCase().includes("hexagon")?l="hexagon":s.question?.toLowerCase().includes("circle")&&(l="circle"),e.jsx("div",{className:"space-y-4",children:e.jsx(Z,{shape:l==="square"?"square":"letter-r",onComplete:r,showHint:n})})},O=()=>{switch(s.type){case"multiple-choice":return M();case"true-false":return W();case"input":return X();case"visual-select":return J();default:return M()}};return e.jsxs(u.div,{className:`bg-white rounded-xl shadow-lg border border-gray-200 p-6 ${x}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Question ",s.points," points"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:`flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium ${L?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:[e.jsx(A,{className:"w-3 h-3"}),e.jsx("span",{children:L?"Skipped":`${C}s`})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.difficulty==="easy"?"bg-success-100 text-success-800":s.difficulty==="medium"?"bg-warning-100 text-warning-800":"bg-error-100 text-error-800"}`,children:s.difficulty}),n&&s.hint&&e.jsx(b,{variant:"ghost",size:"sm",onClick:()=>w(!y),className:"p-2",children:e.jsx(B,{className:"w-4 h-4"})})]})]}),e.jsx("p",{className:"text-gray-700 text-lg leading-relaxed",children:s.question}),!a&&C<10&&e.jsx(u.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:2,duration:.5},className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2 text-blue-700",children:[e.jsx(A,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Take your time to read and understand the question! 🤔"})]})})]}),s.visualization&&e.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:e.jsx(s.visualization,{})}),e.jsx("div",{className:"mb-6",children:O()}),e.jsx(G,{children:a&&e.jsxs(u.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:[e.jsx(V,{type:c?"success":"error",message:c?"Correct! Well done!":"Not quite right. Try again!",className:"mb-4"}),c&&!I&&e.jsx(u.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2 text-green-700",children:[e.jsx("span",{className:"text-lg",children:"📚"}),e.jsx("span",{className:"text-sm font-medium",children:"Great job! Take time to read the explanation below - it will help you understand better!"})]})}),y&&s.explanation&&e.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Explanation:"}),e.jsx("p",{className:"text-blue-800",children:s.explanation})]}),!c&&d<3&&e.jsx("div",{className:"flex justify-center",children:e.jsxs(b,{onClick:T,variant:"secondary",size:"sm",className:"mr-2",children:[e.jsx(Y,{className:"w-4 h-4 mr-2"}),"Try Again"]})}),h&&e.jsx("div",{className:"flex justify-center mt-4",children:I?e.jsx(b,{onClick:K,children:c?f?"Complete Lesson":"Next Question":"Continue"}):e.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[e.jsx(A,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:a&&c?`Please read the explanation carefully... (${30-C}s remaining)`:`Please take your time to read and think... (${30-C}s remaining)`})]}),e.jsx(b,{onClick:D,variant:"secondary",size:"sm",className:"text-gray-600 border border-gray-300 hover:border-gray-400",children:"Skip Timer & Continue"})]})})]})}),y&&s.hint&&e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:e.jsx(V,{type:"hint",message:s.hint,title:"Hint"})})]})},ue=({questions:s,onComplete:N,onBack:h})=>{const[n,i]=m.useState({currentQuestionIndex:0,answers:[],score:0,isCompleted:!1}),x=s[n.currentQuestionIndex],f=n.currentQuestionIndex===s.length-1,o=(t,d)=>{const p={questionId:x.id,answer:t,isCorrect:d,attempts:1};i(y=>({...y,answers:[...y.answers.filter(w=>w.questionId!==x.id),p],score:y.score+(d?x.points||1:0)}))},g=()=>{if(f){i(d=>({...d,isCompleted:!0}));const t=n.answers.filter(d=>d.isCorrect).length;N(n.score,s.length,t)}else i(t=>({...t,currentQuestionIndex:t.currentQuestionIndex+1}))},a=()=>{i({currentQuestionIndex:0,answers:[],score:0,isCompleted:!1})},j=()=>{const t=s.reduce((d,p)=>d+(p.points||1),0);return t>0?Math.round(n.score/t*100):0},c=t=>t>=90?"Excellent! You've mastered this topic! 🌟":t>=80?"Great job! You understand this well! 👏":t>=70?"Good work! You're getting the hang of it! 👍":t>=60?"Not bad! Keep practicing to improve! 💪":"Don't give up! Review the lesson and try again! 📚";if(n.isCompleted){const t=j(),d=n.answers.filter(p=>p.isCorrect).length;return e.jsxs(u.div,{className:"bg-white rounded-xl shadow-lg p-8 text-center",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},children:[e.jsx(u.div,{className:"text-6xl mb-4",initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring"},children:t>=80?"🏆":t>=60?"🎉":"📚"}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Quiz Complete!"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[t,"%"]}),e.jsx("div",{className:"text-sm text-blue-800",children:"Score"})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[d,"/",s.length]}),e.jsx("div",{className:"text-sm text-green-800",children:"Correct"})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:n.score}),e.jsx("div",{className:"text-sm text-purple-800",children:"Points"})]})]}),e.jsx("p",{className:"text-lg text-gray-700 mb-8",children:c(t)}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsxs(b,{onClick:a,variant:"secondary",size:"lg",className:"flex items-center",children:[e.jsx(Y,{className:"w-4 h-4 mr-2"}),"Try Again"]}),h&&e.jsxs(b,{onClick:h,variant:"primary",size:"lg",className:"flex items-center",children:[e.jsx($,{className:"w-4 h-4 mr-2"}),"Continue Lesson"]})]})]})}return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Question ",n.currentQuestionIndex+1," of ",s.length]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Score: ",n.score," points"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx(u.div,{className:"bg-primary-600 h-2 rounded-full",initial:{width:0},animate:{width:`${(n.currentQuestionIndex+1)/s.length*100}%`},transition:{duration:.3}})})]}),e.jsx(G,{mode:"wait",children:e.jsx(u.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:e.jsx(ae,{question:x,onAnswer:o,onNext:g,isLastQuestion:f,showHint:!0})},x.id)})]})};export{ue as default};
