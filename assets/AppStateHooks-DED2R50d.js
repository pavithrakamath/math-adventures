import{r,A as C}from"./index-5LhQW9Oc.js";const l=()=>{const e=r.useContext(C);if(!e)throw new Error("useAppState must be used within an AppStateProvider");return e},E=()=>{const{state:e,dispatch:t}=l(),a=r.useCallback((s,o)=>{t({type:"UPDATE_PROGRESS",payload:{lessonProgress:{...e.progress.lessonProgress,[s]:{...e.progress.lessonProgress[s],lessonId:s,currentSection:0,completedSections:new Set,answers:{},score:0,timeSpent:0,isCompleted:!1,lastAccessed:new Date,...o}}}})},[e.progress.lessonProgress,t]),p=r.useCallback((s,o,n)=>{t({type:"COMPLETE_LESSON",payload:{lessonId:s,score:o,timeSpent:n}})},[t]),c=r.useCallback((s,o,n)=>{t({type:"ADD_MISTAKE",payload:{lessonId:s,question:o,errorDescription:n}})},[t]),g=r.useCallback((s,o)=>{t({type:"UPDATE_SCORE",payload:{lessonId:s,scoreIncrement:o}})},[t]),i=r.useCallback(s=>{t({type:"MARK_AS_COMPLETED",payload:s})},[t]),u=r.useCallback(s=>e.progress.lessonProgress[s],[e.progress.lessonProgress]),d=r.useCallback(s=>{const o=e.progress.lessonProgress[s];return!o||o.mistakes.length===0?"No past errors recorded for this lesson.":o.mistakes.slice(-3).map(n=>`On question "${n.question}", the student had this issue: ${n.errorDescription}`).join(`
`)},[e.progress.lessonProgress]),P=r.useCallback(s=>e.progress.completedLessons.size/s*100,[e.progress.completedLessons.size]),S=r.useCallback(s=>e.progress.completedLessons.has(s),[e.progress.completedLessons]);return{progress:e.progress,isLoading:e.isLoading,updateLessonProgress:a,completeLesson:p,addMistake:c,updateScore:g,markAsCompleted:i,getLessonProgress:u,getPastErrors:d,getOverallProgress:P,isLessonCompleted:S}},k=()=>{const{state:e,dispatch:t}=l(),a=r.useCallback(p=>{t({type:"UPDATE_SETTINGS",payload:p})},[t]);return{settings:e.settings,updateSettings:a}};export{k as a,E as u};
